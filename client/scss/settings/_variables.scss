// paths

// We can't use absolute paths here, because those are dependent on Django's
// STATIC_URL setting. Instead, relative paths from the final location of the
// compiled CSS files are used.
// */

$static-root: '../../';
$images-root: $static-root + 'wagtailadmin/images/';
$font-root: '../../wagtailadmin/fonts/';

// grid settings
$grid-columns: 12;
$grid-gutter-width: 3%;
$grid-max-width: 1200px;
$grid-content-indent: 0.7;

$mobile-nice-padding: 20px;
$desktop-nice-padding: 50px;

// screen breakpoints
$breakpoints: (
    xs: 0,
    sm: 50em,    // 800px
    md: 56.25em, // 900px
    lg: 75em,    // 1200px
    xl: 100em,   // 1440px
);


// Fonts
$font-sans: Open Sans, Arial, sans-serif;
$font-serif: Roboto Slab, Georgia, serif;

// misc sizing
$thumbnail-width: 130px;
$menu-width: 200px;
$menu-width-max: 320px;
$mobile-nav-indent: 50px;

$focus-outline-width: 3px;

$nav-wrapper-inner-z-index: 26;
$draftail-editor-z-index: $nav-wrapper-inner-z-index + 1;

$object-title-height: 40px;

// Nav
$nav-footer-closed-height: 50px;
$nav-footer-submenu-height: 77px;
$nav-footer-open-height: $nav-footer-closed-height + $nav-footer-submenu-height;


@function css-darken($hsl-tuple, $darken-by) {
    $h: nth($hsl-tuple, 1);
    $s: nth($hsl-tuple, 2);
    $l: nth($hsl-tuple, 3);
    @return ($h, $s, calc(#{$l} - #{$darken-by + 0%}));
}
@function css-lighten($hsl-tuple, $lighten-by) {
    $h: nth($hsl-tuple, 1);
    $s: nth($hsl-tuple, 2);
    $l: nth($hsl-tuple, 3);
    @return ($h, $s, calc(#{$l} + #{$lighten-by + 0%}));
}
@function css-saturate($hsl-tuple, $saturate-by) {
    $h: nth($hsl-tuple, 1);
    $s: nth($hsl-tuple, 2);
    $l: nth($hsl-tuple, 3);
    @return ($h, calc(#{$s} + #{$saturate-by + 0%}), $l);
}
@function css-desaturate($hsl-tuple, $desaturate-by) {
    $h: nth($hsl-tuple, 1);
    $s: nth($hsl-tuple, 2);
    $l: nth($hsl-tuple, 3);
    @return ($h, calc(#{$s} - #{$desaturate-by + 0%}), $l);
}
@function css-adjust-hue($hsl-tuple, $adjust-by) {
    $h: nth($hsl-tuple, 1);
    $s: nth($hsl-tuple, 2);
    $l: nth($hsl-tuple, 3);
    @return (calc(#{$h} + #{$adjust-by}), $s, $l);
}
@function css-transparentize($hsl-tuple, $alpha) {
    $h: nth($hsl-tuple, 1);
    $s: nth($hsl-tuple, 2);
    $l: nth($hsl-tuple, 3);
    @return ($h, $s, $l, $alpha);
}

// $color is either a color or an hsl tuple
@mixin define-color($name, $color) {
    $h: null;
    $s: null;
    $l: null;

    @if type-of($color) == color {
        $h: hue($color) / 1deg; // Cast to unitless
        $s: saturation($color);
        $l: lightness($color);
    } @else {
        $h: nth($color, 1);
        $s: nth($color, 2);
        $l: nth($color, 3);
    }

    --color-#{$name}-hue: #{$h};
    --color-#{$name}-saturation: #{$s};
    --color-#{$name}-lightness: #{$l};
    --color-#{$name}: hsl(#{ var(--color-#{$name}-hue), var(--color-#{$name}-saturation), var(--color-#{$name}-lightness) });
}

@function get-color($name) {
    @return (var(--color-#{$name}-hue), var(--color-#{$name}-saturation), var(--color-#{$name}-lightness));
}

:root {
    // colours
    // Defines: --color-primary-hue, --color-primary-saturation, --color-primary-lightness, and --color-primary
    @include define-color('primary', #007d7e);
    @include define-color('primary-darker', css-darken(css-adjust-hue(get-color('primary'), 1), 4%));
    @include define-color('primary-dark', css-darken(css-adjust-hue(get-color('primary'), 1), 7%));


    @include define-color('blue', #71b2d4);
    @include define-color('red', #cd3238);
    @include define-color('red-dark', #b4191f);
    @include define-color('orange', #e9b04d);
    @include define-color('orange-dark', #bb5b03);
    @include define-color('green', #189370);
    @include define-color('green-dark', #157b57);
    @include define-color('green-darker', #105d42); // White has AAA compatibility when this is used in bgd.
    @include define-color('salmon', #f37e77);
    @include define-color('salmon-light', #fcf2f2);
    @include define-color('white', #fff);
    @include define-color('black', #000);

    // darker to lighter
    @include define-color('grey-1', css-darken(get-color('white'), 80));
    @include define-color('grey-2', css-darken(get-color('white'), 70));
    @include define-color('grey-3', css-darken(get-color('white'), 15));
    @include define-color('grey-4', css-darken(get-color('white'), 10));
    @include define-color('grey-5', css-darken(get-color('white'), 2));


    --color-menu-text: hsl(#{css-darken(get-color('white'), 20)});

    --color-thead-bg: var(--color-grey-5);
    --color-header-bg: var(--color-primary);

    --color-fieldset-hover: var(--color-grey-5);
    --color-input-border: var(--color-grey-4);
    --color-input-focus: hsl(#{css-lighten(css-desaturate(get-color('primary'), 40), 72)});
    --color-input-focus-border: hsl(#{css-lighten(css-saturate(get-color('primary'), 12), 10)});
    --color-input-error-bg: hsl(#{css-lighten(css-saturate(get-color('red'), 28), 45)});

    --color-button: var(--color-primary);
    --color-button-hover: var(--color-primary-darker);
    @include define-color('button-yes', get-color('green-dark'));
    --color-button-yes-hover: hsl(#{css-darken(get-color('button-yes'), 8%)});
    @include define-color('button-no', get-color('red-dark'));
    --color-button-no-hover: hsl(#{css-darken(get-color('button-no'), 20%)});
    @include define-color('button-warning', get-color('orange-dark'));
    --color-button-warning-hover: hsl(#{css-darken(get-color('button-warning'), 20%)});

    --color-link: var(--color-primary-darker);
    --color-link-hover: var(--color-primary-dark);

    // The focus outline color is defined without reusing a named color variable
    // because it shouldnâ€™t be reused for anything else in the UI.
    --color-focus-outline: #ffbf47;

    @include define-color('text-base', css-darken(get-color('white'), 85));
    --color-text-input: hsl(#{css-darken(get-color('white'), 90)});

    // Color states
    --color-state-live: #59b524;
    --color-state-draft: #808080;
    --color-state-absent: #ff8f11;
    --color-state-live-draft: #43b1b0;

    // Nav
    --nav-grey-1: hsl(#{css-darken(get-color('white'), 80)});
    --nav-grey-2: hsl(#{css-darken(get-color('white'), 60)});
    --nav-item-hover-bg: rgba(100, 100, 100, 0.15);
    --nav-item-active-bg: hsl(#{css-darken(get-color('white'), 90)});
    --nav-submenu-bg: hsl(#{css-darken(get-color('white'), 85)});
    --nav-footer-account-bg: var(--nav-item-active-bg);
    --nav-footer-submenu-bg: var(--nav-submenu-bg);

    // Nav search
    --nav-search-color: hsl(#{css-darken(get-color('white'), 20)});
    --nav-search-border: hsl(#{css-darken(get-color('white'), 40)});
    --nav-search-bg: var(--nav-grey-1);
    --nav-search-hover-bg: var(--nav-item-hover-bg);
    --nav-search-focus-color: var(--color-white);
    --nav-search-focus-bg: var(nav-item-hover-bg);
}
